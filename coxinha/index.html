<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Jogo da Coxinha</title>
		
		<style>
			canvas {
				position: absolute;
				top: 0px;
				bottom: 0px;
				left: 0px;
				right: 0px;
				margin: auto;
			}
			
			html, body {
            	background: #d1d2d1 url(image/background.jpeg) repeat fixed left top !important;
          	}

		</style>
		
		<script type="text/javascript" src="bootstrap/js/jquery-2.1.4.min.js"></script>
		<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" type="text/css">
		<link rel="icon" href="image/coxinha300.png">
	</head>	
	
	<body>
<!--Triggers-->

<!--		<input size="40" value="Write a character into this field!" onkeypress="GetChar (event);"/>-->
		
<!--		<div style="visibility:hidden;">
			<img id="coxinha" src="image/coxinha300.png" alt="Coxinha">
		</div>-->
		
		<script> // Javascript
			//Variáveis do jogo
			var canvas, ctx, c, gameHeight, gameWidth, frames = 0;
			var X = -37, Y = 469, speed = 50;
			var message;
			var mouseX, mouseY;
		
			function main() {
				gameHeight = window.innerHeight;
				gameWidth = window.innerWidth;
				
				if (gameWidth >= 800) {
					gameHeight = 762;
					gameWidth = 1024;
				}
				
				canvas = document.createElement("canvas");
				canvas.width = gameWidth;
				canvas.height = gameHeight;
				canvas.style.border = "1px solid #000";
				
				ctx = canvas.getContext("2d");
				document.body.appendChild(canvas);
//				document.addEventListener("mousedown", keyboard);

				document.addEventListener('mousemove', function(evt) {
					var mousePosition = getMousePosition(canvas, evt);
					setMousePosition(mousePosition.x, mousePosition.y); 
					message = 'Mouse position: \nX: ' + mouseX + ', Y: ' + mouseY;
					console.log(message);
					}, false);

				document.onkeydown = function(e) {
				    switch (e.keyCode) {
				        case 37:
				            //alert('left');
							X=X-speed;
				            break;
				        case 38:
				            //alert('up');
							Y=Y-speed;
				            break;
				        case 39:
				            //alert('right');
							X=X+speed;
				            break;
				        case 40:
				            //alert('down');
							Y=Y+speed;
				            break;
				    }
				};
				run();
			}
			
			function setMousePosition(x, y) {
				mouseX = x;
				mouseY = y;
			}
			
//			function keyboard(event) {
//				alert("Mozão, te amo!");
//			}
			
			function writeMessage(message) {
			    ctx.font = '18pt Calibri';
			    ctx.fillStyle = 'black';
				ctx.fillText(message, 10, 25);
			    }
				
			function getMousePosition(canvas, evt) {
				var rect = canvas.getBoundingClientRect();
				return {
				  x: evt.clientX - rect.left,
				  y: evt.clientY - rect.top
				};
			}
			
//			function GetChar(event){
//	            var chCode = ('charCode' in event) ? event.charCode : event.keyCode;
//	            alert ("The Unicode character code is: " + chCode);
//        	}
			
			function run() {
				update();
//				ctx.clearRect(0, 0, gameWidth, gameHeight);
				draw();
				window.requestAnimationFrame(run);
				
			}
			
			function update() {
				frames++;
			}
			
			function draw() {
				// Céu
				ctx.fillStyle = "#99CCFF";
//				ctx.fillStyle = "transparent";
				ctx.fillRect(0, 0, gameWidth, gameHeight);

				// Coxinha
//			    var img = document.getElementById("coxinha");
				var img = new Image();
				img.src = 'image/coxinha300.png';
			    ctx.drawImage(img, mouseX-150, mouseY-150);
				
				// Mensagem na tela
				writeMessage(message);
			}
			main();
		</script>
<!--		<img id="coxinha" src="image/coxinha1000.png" width="400" height="400" alt="Coxinha 1000">-->
	</body>
</html>